# æ¥è§¦æ£€æµ‹é˜ˆå€¼è°ƒæ•´è¯´æ˜

## ğŸ“Š æ¦‚è¿°

æ¥è§¦æ£€æµ‹æ˜¯æ¨ç®±å­æ¸¸æˆçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒå†³å®šäº†ç³»ç»Ÿä½•æ—¶è¯†åˆ«ç”¨æˆ·çš„æ‰‹æŒ‡æ¥è§¦ã€‚é€šè¿‡è°ƒæ•´æ¥è§¦æ£€æµ‹é˜ˆå€¼ï¼Œæ‚¨å¯ä»¥ä¼˜åŒ–ç³»ç»Ÿçš„å“åº”æ€§å’Œå‡†ç¡®æ€§ã€‚

## ğŸ¯ å½“å‰è®¾ç½®

- **å‹åŠ›é˜ˆå€¼**: `0.003` (ä» `0.005` è°ƒæ•´è€Œæ¥ï¼Œæé«˜çµæ•åº¦)
- **æ¥è§¦é¢ç§¯é˜ˆå€¼**: `3` (åƒç´ ç‚¹æ•°é‡)
- **æ»‘åŠ¨é˜ˆå€¼**: `0.08`
- **æ¢¯åº¦é˜ˆå€¼**: `1e-4`

## ğŸ”§ è°ƒæ•´æ–¹æ³•

### 1. å®æ—¶è°ƒæ•´é˜ˆå€¼

```python
# è®¾ç½®å‹åŠ›é˜ˆå€¼å’Œæ¥è§¦é¢ç§¯é˜ˆå€¼
game_core.set_contact_detection_thresholds(
    pressure_threshold=0.002,      # å‹åŠ›é˜ˆå€¼
    contact_area_threshold=3       # æ¥è§¦é¢ç§¯é˜ˆå€¼
)
```

### 2. è·å–å½“å‰é…ç½®

```python
# è·å–å½“å‰æ¥è§¦æ£€æµ‹é…ç½®
config_info = game_core.get_contact_detection_info()
print(f"å‹åŠ›é˜ˆå€¼: {config_info['pressure_threshold']}")
print(f"æ¥è§¦é¢ç§¯é˜ˆå€¼: {config_info['contact_area_threshold']}")
```

### 3. æµ‹è¯•çµæ•åº¦

```python
# ä½¿ç”¨å½“å‰å‹åŠ›æ•°æ®æµ‹è¯•ä¸åŒé˜ˆå€¼çš„çµæ•åº¦
test_results = game_core.test_contact_sensitivity(pressure_data)
```

## ğŸ“ˆ é˜ˆå€¼é…ç½®å»ºè®®

### é«˜çµæ•åº¦é…ç½®
```python
game_core.set_contact_detection_thresholds(
    pressure_threshold=0.001,      # å¾ˆä½
    contact_area_threshold=2       # å¾ˆå°
)
```
**é€‚ç”¨åœºæ™¯**: éœ€è¦æ£€æµ‹éå¸¸è½»å¾®çš„æ¥è§¦
**é£é™©**: å¯èƒ½äº§ç”Ÿè¯¯åˆ¤

### ä¸­ç­‰çµæ•åº¦é…ç½® (æ¨è)
```python
game_core.set_contact_detection_thresholds(
    pressure_threshold=0.003,      # é€‚ä¸­
    contact_area_threshold=3       # é€‚ä¸­
)
```
**é€‚ç”¨åœºæ™¯**: ä¸€èˆ¬ä½¿ç”¨ï¼Œå¹³è¡¡æ•æ„Ÿåº¦å’Œç¨³å®šæ€§

### ä½çµæ•åº¦é…ç½®
```python
game_core.set_contact_detection_thresholds(
    pressure_threshold=0.005,      # è¾ƒé«˜
    contact_area_threshold=4       # è¾ƒå¤§
)
```
**é€‚ç”¨åœºæ™¯**: éœ€è¦ç¨³å®šçš„æ¥è§¦æ£€æµ‹ï¼Œé¿å…è¯¯åˆ¤

### å¾ˆä½çš„çµæ•åº¦é…ç½®
```python
game_core.set_contact_detection_thresholds(
    pressure_threshold=0.008,      # å¾ˆé«˜
    contact_area_threshold=5       # å¾ˆå¤§
)
```
**é€‚ç”¨åœºæ™¯**: åªæ£€æµ‹æ˜æ˜¾çš„æ¥è§¦ï¼Œå¿½ç•¥è½»å¾®æ¥è§¦

## ğŸ” æ£€æµ‹é€»è¾‘è¯¦è§£

### æ¥è§¦æ£€æµ‹æµç¨‹

1. **å‹åŠ›é˜ˆå€¼æ£€æŸ¥**: æ£€æŸ¥æœ€å¤§å‹åŠ›æ˜¯å¦è¶…è¿‡é˜ˆå€¼
   ```python
   if max_pressure < self.pressure_threshold:
       return False  # å‹åŠ›è¿‡ä½
   ```

2. **æ¥è§¦é¢ç§¯æ£€æŸ¥**: æ£€æŸ¥è¶…è¿‡é˜ˆå€¼çš„åƒç´ ç‚¹æ•°é‡
   ```python
   contact_mask = pressure_data > self.pressure_threshold
   contact_area = np.sum(contact_mask)
   if contact_area < self.contact_area_threshold:
       return False  # æ¥è§¦é¢ç§¯è¿‡å°
   ```

3. **æ¥è§¦ç¡®è®¤**: ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³æ—¶ç¡®è®¤æ¥è§¦
   ```python
   return True  # æ¥è§¦æ£€æµ‹æˆåŠŸ
   ```

### è°ƒè¯•ä¿¡æ¯

ç³»ç»Ÿä¼šè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š
```
ğŸ” æ¥è§¦æ£€æµ‹: å‹åŠ›è¿‡ä½ - æœ€å¤§å‹åŠ›=0.001234, é˜ˆå€¼=0.003000
ğŸ” æ¥è§¦æ£€æµ‹: é¢ç§¯è¿‡å° - æ¥è§¦é¢ç§¯=2, é˜ˆå€¼=3
âœ… æ¥è§¦æ£€æµ‹æˆåŠŸ: æœ€å¤§å‹åŠ›=0.004567, å¹³å‡å‹åŠ›=0.002345, æ¥è§¦é¢ç§¯=15
```

## ğŸ® å®é™…åº”ç”¨å»ºè®®

### åœºæ™¯1ï¼šæ‰‹æŒ‡è½»è§¦
å¦‚æœç”¨æˆ·ä¹ æƒ¯è½»è§¦ä¼ æ„Ÿå™¨ï¼š
```python
game_core.set_contact_detection_thresholds(0.002, 2)
```

### åœºæ™¯2ï¼šæ‰‹æŒ‡é‡å‹
å¦‚æœç”¨æˆ·ä¹ æƒ¯é‡å‹ä¼ æ„Ÿå™¨ï¼š
```python
game_core.set_contact_detection_thresholds(0.005, 4)
```

### åœºæ™¯3ï¼šç¯å¢ƒå™ªå£°è¾ƒå¤§
å¦‚æœä¼ æ„Ÿå™¨ç¯å¢ƒå™ªå£°è¾ƒå¤§ï¼š
```python
game_core.set_contact_detection_thresholds(0.004, 5)
```

### åœºæ™¯4ï¼šé«˜ç²¾åº¦æ§åˆ¶
å¦‚æœéœ€è¦é«˜ç²¾åº¦çš„æ¥è§¦æ§åˆ¶ï¼š
```python
game_core.set_contact_detection_thresholds(0.001, 1)
```

## ğŸš€ å¿«é€Ÿæµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬æŸ¥çœ‹æ•ˆæœï¼š
```bash
python test_contact_threshold.py
```

è¯¥è„šæœ¬ä¼šï¼š
1. ç”Ÿæˆä¸åŒå¼ºåº¦çš„æµ‹è¯•æ•°æ®
2. æµ‹è¯•ä¸åŒé˜ˆå€¼é…ç½®çš„æ•ˆæœ
3. æä¾›çµæ•åº¦åˆ†ææŠ¥å‘Š
4. ç»™å‡ºä¼˜åŒ–å»ºè®®

## ğŸ’¡ ä¼˜åŒ–æŠ€å·§

### 1. é€æ­¥è°ƒæ•´
ä¸è¦ä¸€æ¬¡æ€§å¤§å¹…è°ƒæ•´é˜ˆå€¼ï¼Œå»ºè®®ï¼š
- æ¯æ¬¡è°ƒæ•´å¹…åº¦ä¸è¶…è¿‡50%
- è§‚å¯Ÿè°ƒæ•´åçš„æ•ˆæœ
- æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µå¾®è°ƒ

### 2. ç›‘æ§è°ƒè¯•ä¿¡æ¯
å…³æ³¨æ§åˆ¶å°è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯ï¼š
- å‹åŠ›è¿‡ä½ï¼šéœ€è¦é™ä½å‹åŠ›é˜ˆå€¼
- é¢ç§¯è¿‡å°ï¼šéœ€è¦é™ä½é¢ç§¯é˜ˆå€¼
- é¢‘ç¹è¯¯åˆ¤ï¼šéœ€è¦æé«˜é˜ˆå€¼

### 3. ç¯å¢ƒé€‚åº”
ä¸åŒç¯å¢ƒå¯èƒ½éœ€è¦ä¸åŒè®¾ç½®ï¼š
- æ¸©åº¦å˜åŒ–å¯èƒ½å½±å“ä¼ æ„Ÿå™¨çµæ•åº¦
- æ¹¿åº¦å˜åŒ–å¯èƒ½å½±å“æ¥è§¦æ£€æµ‹
- ä¼ æ„Ÿå™¨è€åŒ–å¯èƒ½éœ€è¦è°ƒæ•´é˜ˆå€¼

### 4. ç”¨æˆ·ä¹ æƒ¯
è€ƒè™‘ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼š
- è½»è§¦ç”¨æˆ·ï¼šä½¿ç”¨ä½é˜ˆå€¼
- é‡å‹ç”¨æˆ·ï¼šä½¿ç”¨é«˜é˜ˆå€¼
- æ··åˆä½¿ç”¨ï¼šä½¿ç”¨ä¸­ç­‰é˜ˆå€¼

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é˜ˆå€¼è¿‡ä½**: å¯èƒ½å¯¼è‡´è¯¯åˆ¤ï¼Œç³»ç»Ÿè¿‡äºæ•æ„Ÿ
2. **é˜ˆå€¼è¿‡é«˜**: å¯èƒ½æ¼æ£€ï¼Œç³»ç»Ÿå“åº”è¿Ÿé’
3. **é¢ç§¯é˜ˆå€¼**: å½±å“æ¥è§¦æ£€æµ‹çš„ç¨³å®šæ€§
4. **å®æ—¶è°ƒæ•´**: å¯ä»¥åœ¨è¿è¡Œæ—¶è°ƒæ•´ï¼Œä½†å»ºè®®åœ¨æµ‹è¯•é˜¶æ®µç¡®å®šæœ€ä½³å€¼

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šæ¥è§¦æ£€æµ‹ä¸çµæ•
**è§£å†³æ–¹æ¡ˆ**: é™ä½å‹åŠ›é˜ˆå€¼
```python
game_core.set_contact_detection_thresholds(0.002, 3)
```

### é—®é¢˜2ï¼šé¢‘ç¹è¯¯åˆ¤
**è§£å†³æ–¹æ¡ˆ**: æé«˜å‹åŠ›é˜ˆå€¼æˆ–é¢ç§¯é˜ˆå€¼
```python
game_core.set_contact_detection_thresholds(0.005, 4)
```

### é—®é¢˜3ï¼šæ¥è§¦æ£€æµ‹ä¸ç¨³å®š
**è§£å†³æ–¹æ¡ˆ**: å¢åŠ é¢ç§¯é˜ˆå€¼
```python
game_core.set_contact_detection_thresholds(0.003, 5)
```

### é—®é¢˜4ï¼šéœ€è¦æ›´ç²¾ç¡®çš„æ§åˆ¶
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨è‡ªé€‚åº”é˜ˆå€¼
```python
# æ ¹æ®å½“å‰å‹åŠ›æ•°æ®åŠ¨æ€è°ƒæ•´
max_pressure = np.max(current_pressure_data)
adaptive_threshold = max_pressure * 0.3  # ä½¿ç”¨30%ä½œä¸ºé˜ˆå€¼
game_core.set_contact_detection_thresholds(adaptive_threshold, 3)
``` 