# ç¨³å®šæ¸²æŸ“ä¿®å¤æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆ3Dç½‘æ ¼å’Œé¢œè‰²ä¼šä¸ç¨³å®šå˜åŒ–ï¼š
- ç½‘æ ¼ä¸€ä¼šæ˜¾ç¤ºä¸€ä¼šæ¶ˆå¤±
- é¢œè‰²ä¼šçªç„¶å˜åŒ–
- è§†è§‰æ•ˆæœä¸ç¨³å®š

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
**è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´æœºåˆ¶**å¯¼è‡´çš„ä¸ç¨³å®šï¼š

1. **è‡ªåŠ¨æ€§èƒ½æ¨¡å¼åˆ‡æ¢**ï¼š
   - å½“FPS < 10æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°"ä½æ€§èƒ½"æ¨¡å¼ï¼ˆç¦ç”¨çº¿æ¡†ï¼‰
   - å½“FPS < 20æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°"æ ‡å‡†"æ¨¡å¼
   - å½“FPS > 50æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°"é«˜æ€§èƒ½"æ¨¡å¼

2. **ä¸åŒæ€§èƒ½æ¨¡å¼çš„æ•ˆæœå·®å¼‚**ï¼š
   - **ä½æ€§èƒ½æ¨¡å¼**ï¼šä½¿ç”¨'hot'é¢œè‰²æ˜ å°„ï¼Œç¦ç”¨çº¿æ¡†
   - **æ ‡å‡†æ¨¡å¼**ï¼šä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²æ˜ å°„ï¼Œçº¿æ¡†æ ¹æ®ç”¨æˆ·è®¾ç½®
   - **é«˜æ€§èƒ½æ¨¡å¼**ï¼šä½¿ç”¨å®Œæ•´é¢„å¤„ç†ï¼Œçº¿æ¡†æ ¹æ®ç”¨æˆ·è®¾ç½®

3. **ç¼“å­˜å¤±æ•ˆ**ï¼š
   - æ€§èƒ½æ¨¡å¼åˆ‡æ¢æ—¶ï¼Œ3Dè¡¨é¢ç¼“å­˜è¢«æ ‡è®°ä¸ºéœ€è¦é‡æ–°åˆ›å»º
   - å¯¼è‡´é¢œè‰²æ˜ å°„å’Œçº¿æ¡†æ•ˆæœé‡æ–°è®¡ç®—

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šç¦ç”¨è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´ï¼ˆæ¨èï¼‰

```python
def adaptive_performance_adjustment(self):
    """è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´ - ç¦ç”¨è‡ªåŠ¨åˆ‡æ¢"""
    # æš‚æ—¶ç¦ç”¨è‡ªåŠ¨æ€§èƒ½è°ƒæ•´ï¼Œä¿æŒç”¨æˆ·è®¾ç½®çš„ç¨³å®šæ€§
    pass
```

### æ–¹æ¡ˆ2ï¼šå¢åŠ æ€§èƒ½æ¨¡å¼åˆ‡æ¢çš„ç¨³å®šæ€§

```python
def set_performance_mode(self, mode):
    """è®¾ç½®æ€§èƒ½æ¨¡å¼ - å¢åŠ ç¨³å®šæ€§"""
    if mode in ["ä½æ€§èƒ½", "æ ‡å‡†", "é«˜æ€§èƒ½", "æé™"]:
        # è®°å½•ä¹‹å‰çš„æ¨¡å¼
        previous_mode = self.performance_mode
        
        # æ›´æ–°æ¨¡å¼
        self.performance_mode = mode
        
        # å¦‚æœæ¨¡å¼å‘ç”Ÿå˜åŒ–ï¼Œå¼ºåˆ¶é‡æ–°åˆ›å»º3Dè¡¨é¢
        if previous_mode != mode:
            self._pressure_data_changed = True
            print(f"ğŸ”„ æ€§èƒ½æ¨¡å¼ä» {previous_mode} åˆ‡æ¢åˆ° {mode}")
        
        print(f"ğŸ¯ æ¸²æŸ“å™¨æ€§èƒ½æ¨¡å¼å·²è®¾ç½®ä¸º: {mode}")
        self.update_frame_rate()
    else:
        print(f"âŒ æ— æ•ˆçš„æ€§èƒ½æ¨¡å¼: {mode}")
```

### æ–¹æ¡ˆ3ï¼šç»Ÿä¸€é¢œè‰²æ˜ å°„ç­–ç•¥

```python
def get_3d_rendering_options_optimized(self):
    """æ ¹æ®æ€§èƒ½æ¨¡å¼è·å–ä¼˜åŒ–çš„3Dæ¸²æŸ“é€‰é¡¹ - ç»Ÿä¸€é¢œè‰²ç­–ç•¥"""
    if self.performance_mode == "ä½æ€§èƒ½":
        return {
            'enable_3d_lighting': False,
            'enable_3d_shadows': False,
            'enable_wireframe': False,  # ä½æ€§èƒ½æ¨¡å¼å¼ºåˆ¶ç¦ç”¨çº¿æ¡†
            'enable_anti_aliasing': False,
            'surface_alpha_3d': 1.0,
            'colormap': 'hot'  # ç»Ÿä¸€ä½¿ç”¨hoté¢œè‰²æ˜ å°„
        }
    elif self.performance_mode == "æ ‡å‡†":
        return {
            'enable_3d_lighting': True,
            'enable_3d_shadows': False,
            'enable_wireframe': self.enable_wireframe,  # ä½¿ç”¨ç”¨æˆ·è®¾ç½®
            'enable_anti_aliasing': True,
            'surface_alpha_3d': 0.9,
            'colormap': self.get_custom_colormap()  # ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²æ˜ å°„
        }
    else:
        # é«˜æ€§èƒ½å’Œæé™æ¨¡å¼ä½¿ç”¨ç”¨æˆ·è®¾ç½®
        return {
            'enable_3d_lighting': self.enable_3d_lighting,
            'enable_3d_shadows': self.enable_3d_shadows,
            'enable_wireframe': self.enable_wireframe,  # ä½¿ç”¨ç”¨æˆ·è®¾ç½®
            'enable_anti_aliasing': self.enable_anti_aliasing,
            'surface_alpha_3d': self.surface_alpha_3d,
            'colormap': self.get_custom_colormap()  # ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²æ˜ å°„
        }
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. æä¾›æ€§èƒ½æ¨¡å¼é”å®šé€‰é¡¹
```python
# åœ¨æ§åˆ¶é¢æ¿ä¸­æ·»åŠ 
self.lock_performance_mode = QCheckBox("é”å®šæ€§èƒ½æ¨¡å¼")
self.lock_performance_mode.setChecked(False)
self.lock_performance_mode.setToolTip("é”å®šæ€§èƒ½æ¨¡å¼ï¼Œé˜²æ­¢è‡ªåŠ¨åˆ‡æ¢")
```

### 2. æ€§èƒ½æ¨¡å¼åˆ‡æ¢æç¤º
```python
def set_performance_mode(self, mode):
    """è®¾ç½®æ€§èƒ½æ¨¡å¼ - å¢åŠ ç”¨æˆ·æç¤º"""
    if mode in ["ä½æ€§èƒ½", "æ ‡å‡†", "é«˜æ€§èƒ½", "æé™"]:
        previous_mode = self.performance_mode
        self.performance_mode = mode
        
        if previous_mode != mode:
            print(f"ğŸ”„ æ€§èƒ½æ¨¡å¼å·²åˆ‡æ¢: {previous_mode} â†’ {mode}")
            print(f"ğŸ’¡ æç¤ºï¼šé¢œè‰²å’Œç½‘æ ¼æ•ˆæœå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–")
            print(f"ğŸ’¡ å»ºè®®ï¼šå¦‚éœ€ç¨³å®šæ•ˆæœï¼Œè¯·åœ¨æ§åˆ¶é¢æ¿ä¸­é”å®šæ€§èƒ½æ¨¡å¼")
        
        self.update_frame_rate()
```

### 3. è§†è§‰æ•ˆæœçš„ç¨³å®šæ€§æ§åˆ¶
```python
def render_3d_heatmap_optimized(self, pressure_data):
    """ä¼˜åŒ–çš„3Dçƒ­åŠ›å›¾æ¸²æŸ“ - å¢åŠ ç¨³å®šæ€§æ§åˆ¶"""
    try:
        # æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°åˆ›å»º3Dè¡¨é¢
        force_recreate = (
            not hasattr(self, '_3d_surface') or 
            self._3d_surface is None or 
            self._pressure_data_changed or
            hasattr(self, '_performance_mode_changed') and self._performance_mode_changed
        )
        
        if force_recreate:
            # é‡æ–°åˆ›å»º3Dè¡¨é¢
            # ... ç°æœ‰ä»£ç  ...
            
            # æ¸…é™¤æ€§èƒ½æ¨¡å¼å˜åŒ–æ ‡å¿—
            if hasattr(self, '_performance_mode_changed'):
                self._performance_mode_changed = False
        else:
            # åªæ›´æ–°æ•°æ®ï¼Œä¿æŒè§†è§‰æ•ˆæœç¨³å®š
            try:
                self._3d_surface.set_array(pressure_data.ravel())
            except:
                self._pressure_data_changed = True
                
    except Exception as e:
        print(f"âŒ 3Dçƒ­åŠ›å›¾æ¸²æŸ“å¤±è´¥: {e}")
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. ç«‹å³è§£å†³æ–¹æ¡ˆ
- åœ¨æ§åˆ¶é¢æ¿ä¸­æ‰‹åŠ¨é€‰æ‹©å¹¶é”å®šæ€§èƒ½æ¨¡å¼
- é€‰æ‹©"æ ‡å‡†"æˆ–"é«˜æ€§èƒ½"æ¨¡å¼ä»¥è·å¾—ç¨³å®šçš„è§†è§‰æ•ˆæœ

### 2. é•¿æœŸè§£å†³æ–¹æ¡ˆ
- ç¦ç”¨è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´
- ç»Ÿä¸€é¢œè‰²æ˜ å°„ç­–ç•¥
- å¢åŠ æ€§èƒ½æ¨¡å¼åˆ‡æ¢çš„ç”¨æˆ·æ§åˆ¶

### 3. æ€§èƒ½ä¸ç¨³å®šæ€§å¹³è¡¡
- **æ€§èƒ½ä¼˜å…ˆ**ï¼šä½¿ç”¨"ä½æ€§èƒ½"æ¨¡å¼ï¼Œæ¥å—è§†è§‰æ•ˆæœç®€åŒ–
- **ç¨³å®šæ€§ä¼˜å…ˆ**ï¼šé”å®šæ€§èƒ½æ¨¡å¼ï¼Œé¿å…è‡ªåŠ¨åˆ‡æ¢
- **å¹³è¡¡æ–¹æ¡ˆ**ï¼šä½¿ç”¨"æ ‡å‡†"æ¨¡å¼ï¼Œåœ¨æ€§èƒ½å’Œç¨³å®šæ€§é—´å–å¾—å¹³è¡¡

## ğŸ”§ å®æ–½æ­¥éª¤

1. **ç«‹å³ä¿®å¤**ï¼šç¦ç”¨è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´
2. **ç”¨æˆ·ç•Œé¢**ï¼šæ·»åŠ æ€§èƒ½æ¨¡å¼é”å®šé€‰é¡¹
3. **ç¨³å®šæ€§ä¼˜åŒ–**ï¼šç»Ÿä¸€é¢œè‰²æ˜ å°„å’Œæ¸²æŸ“ç­–ç•¥
4. **ç”¨æˆ·æ•™è‚²**ï¼šæä¾›æ¸…æ™°çš„ä½¿ç”¨è¯´æ˜å’Œæç¤º

## ğŸ“ æ€»ç»“

ç½‘æ ¼å’Œé¢œè‰²ä¸ç¨³å®šçš„æ ¹æœ¬åŸå› æ˜¯è‡ªé€‚åº”æ€§èƒ½è°ƒæ•´æœºåˆ¶åœ¨ä¸åŒæ€§èƒ½æ¨¡å¼é—´è‡ªåŠ¨åˆ‡æ¢ï¼Œå¯¼è‡´è§†è§‰æ•ˆæœå‘ç”Ÿå˜åŒ–ã€‚é€šè¿‡ç¦ç”¨è‡ªåŠ¨åˆ‡æ¢ã€ç»Ÿä¸€æ¸²æŸ“ç­–ç•¥å’Œå¢åŠ ç”¨æˆ·æ§åˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 